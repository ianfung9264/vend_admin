{"version":3,"sources":["umi.2579400585710010057.hot-update.js","src/app.tsx"],"sourcesContent":["globalThis.makoModuleHotUpdate(\n  'src/.umi/umi.ts?hmr',\n  {\n    modules: {},\n  },\n  function (runtime) {\n    runtime._h='2232812592587723285';;\n  },\n);\n","import {\n  AvatarDropdown,\n  AvatarName,\n  Footer,\n  Question,\n  SelectLang,\n} from \"@/components\";\nimport { currentUser as queryCurrentUser } from \"@/services/ant-design-pro/api\";\nimport { LinkOutlined } from \"@ant-design/icons\";\nimport type { Settings as LayoutSettings } from \"@ant-design/pro-components\";\nimport { SettingDrawer } from \"@ant-design/pro-components\";\nimport type { RunTimeLayoutConfig } from \"@umijs/max\";\nimport { history, Link } from \"@umijs/max\";\nimport React from \"react\";\nimport defaultSettings from \"../config/defaultSettings\";\nimport { errorConfig } from \"./requestErrorConfig\";\n\nconst isDev = process.env.NODE_ENV === \"development\";\nconst loginPath = \"/user/login\";\n\n/**\n * @see  https://umijs.org/zh-CN/plugins/plugin-initial-state\n * */\nexport async function getInitialState(): Promise<{\n  settings?: Partial<LayoutSettings>;\n  currentUser?: API.CurrentUser;\n  loading?: boolean;\n  fetchUserInfo?: () => Promise<API.CurrentUser | undefined>;\n}> {\n  const fetchUserInfo = async () => {\n    try {\n      const msg = await queryCurrentUser({\n        skipErrorHandler: true,\n      });\n      return msg.data;\n    } catch (error) {\n      history.push(loginPath);\n    }\n    return undefined;\n  };\n  // 如果不是登录页面，执行\n  const { location } = history;\n  if (location.pathname !== loginPath) {\n    const currentUser = await fetchUserInfo();\n    return {\n      fetchUserInfo,\n      currentUser,\n      settings: defaultSettings as Partial<LayoutSettings>,\n    };\n  }\n  return {\n    fetchUserInfo,\n    settings: defaultSettings as Partial<LayoutSettings>,\n  };\n}\n\n// ProLayout 支持的api https://procomponents.ant.design/components/layout\nexport const layout: RunTimeLayoutConfig = ({\n  initialState,\n  setInitialState,\n}) => {\n  return {\n    actionsRender: () => [\n      <Question key=\"doc\" />,\n      <SelectLang key=\"SelectLang\" />,\n    ],\n    avatarProps: {\n      src: initialState?.currentUser?.avatar,\n      title: <AvatarName />,\n      render: (_, avatarChildren) => {\n        return <AvatarDropdown>{avatarChildren}</AvatarDropdown>;\n      },\n    },\n    waterMarkProps: {\n      content: initialState?.currentUser?.name,\n    },\n    footerRender: () => <Footer />,\n    onPageChange: () => {\n      const { location } = history;\n      // 如果没有登录，重定向到 login\n      if (!initialState?.currentUser && location.pathname !== loginPath) {\n        history.push(loginPath);\n      }\n    },\n    bgLayoutImgList: [\n      {\n        src: \"https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/D2LWSqNny4sAAAAAAAAAAAAAFl94AQBr\",\n        left: 85,\n        bottom: 100,\n        height: \"303px\",\n      },\n      {\n        src: \"https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/C2TWRpJpiC0AAAAAAAAAAAAAFl94AQBr\",\n        bottom: -68,\n        right: -45,\n        height: \"303px\",\n      },\n      {\n        src: \"https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/F6vSTbj8KpYAAAAAAAAAAAAAFl94AQBr\",\n        bottom: 0,\n        left: 0,\n        width: \"331px\",\n      },\n    ],\n    links: isDev\n      ? [\n          <Link key=\"openapi\" to=\"/umi/plugin/openapi\" target=\"_blank\">\n            <LinkOutlined />\n            <span>OpenAPI 文档</span>\n          </Link>,\n        ]\n      : [],\n    menuHeaderRender: undefined,\n    // 自定义 403 页面\n    // unAccessible: <div>unAccessible</div>,\n    // 增加一个 loading 的状态\n    childrenRender: (children) => {\n      // if (initialState?.loading) return <PageLoading />;\n      return (\n        <>\n          {children}\n          {isDev && (\n            <SettingDrawer\n              disableUrlParams\n              enableDarkTheme\n              settings={initialState?.settings}\n              onSettingChange={(settings) => {\n                setInitialState((preInitialState) => ({\n                  ...preInitialState,\n                  settings,\n                }));\n              }}\n            />\n          )}\n        </>\n      );\n    },\n    ...initialState?.settings,\n  };\n};\n\n/**\n * @name request 配置，可以配置错误处理\n * 它基于 axios 和 ahooks 的 useRequest 提供了一套统一的网络请求和错误处理方案。\n * @doc https://umijs.org/docs/max/request#配置\n */\nexport const request = {\n  ...errorConfig,\n  requestInterceptors: [(_, opention) => {}],\n};\n"],"names":[],"mappings":"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"}