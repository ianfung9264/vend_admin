{"version":3,"sources":["src/pages/Transaction/refund/columns.tsx","src/pages/Transaction/refund/index.tsx"],"sourcesContent":["import { ProColumns } from \"@ant-design/pro-components\";\nimport { Button, Divider, Tooltip } from \"antd\";\nimport DetailModal from \"./detailModal\";\nimport { LandownerAdvancedStatus, OtpStatusType } from \"@/services/commonType\";\nimport { InfoCircleOutlined } from \"@ant-design/icons\";\n\nexport function RefundTableColumns({\n  mainTableReload,\n}: {\n  mainTableReload: (() => Promise<void>) | undefined;\n}): ProColumns<any>[] {\n  // console.log(\"mainTableReload\", mainTableReload);\n  // const [tableReload, setTableReload] = useState(() => mainTableReload);\n\n  // useEffect(() => {\n  //   setTableReload(() => mainTableReload);\n  // }, [mainTableReload]);\n  return [\n    {\n      title: \"Event id\",\n      dataIndex: \"application.event_id\",\n      key: \"landowner\",\n      render: (_, record) => {\n        return record.application ? record.application?.event_id : null;\n      },\n      align: \"center\",\n    },\n    {\n      title: \"Application id\",\n      dataIndex: \"application_id\",\n      key: \"application_id\",\n      align: \"center\",\n    },\n    {\n      title: \"Amount\",\n      dataIndex: \"refunded_amount\",\n      key: \"amount\",\n      align: \"center\",\n    },\n\n    {\n      title: \"Currency\",\n      dataIndex: \"refunded_currency\",\n      key: \"currency\",\n      align: \"center\",\n    },\n    {\n      title: \"Progress\",\n      dataIndex: \"is_confirm_refunded\",\n      key: \"is_confirm_refunded\",\n      align: \"center\",\n      valueType: \"select\",\n      valueEnum: {\n        false: \"Pending\",\n        true: \"Confirmed\",\n      },\n    },\n    {\n      title: \"Refunded time\",\n      dataIndex: \"refunded_datetime\",\n      key: \"refunded_datetime\",\n      align: \"center\",\n      valueType: \"dateTime\",\n    },\n\n    {\n      title: \"_id\",\n      dataIndex: \"event_idCount\",\n      key: \"_id\",\n      align: \"center\",\n      hidden: true,\n    },\n  ];\n}\n","import BaseIndex from \"@/components/Base/BaseIndex\";\nimport BaseSearch from \"@/components/Base/BaseSearch\";\nimport BaseTable from \"@/components/Base/BaseTable\";\nimport { _getAllOrg } from \"@/services/org/info\";\nimport { ActionType } from \"@ant-design/pro-components\";\nimport { useRequest } from \"@umijs/max\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { RefundTableColumns } from \"./columns\";\nimport Helper from \"@/util/searchHelper\";\nimport { message } from \"antd\";\nimport {\n  LandownerAdvancedStatus,\n  WithdrawalProgress,\n} from \"@/services/commonType\";\nimport { _getAllWaitingAdvancedOrg } from \"@/services/org/advanced\";\nimport { _getAllRefund, _getAlWithdrawal } from \"@/services/withdrawal/info\";\nexport default function Index() {\n  /**********************************狀態管理**********************************/\n\n  const actionRef = useRef<ActionType>();\n  const [searchKey, setSearchKey] = useState(\"\");\n  const [reload, setReload] = useState(() => actionRef.current?.reload);\n  const [allOrgData, setAllOrgData] = useState<any[]>([]);\n  useEffect(() => {\n    setReload(() => actionRef.current?.reload);\n  }, []);\n\n  /**********************************狀態管理**********************************/\n  /**********************************組件初始化**********************************/\n  /**********************************組件初始化**********************************/\n  /**********************************異步函數**********************************/\n\n  /**********************************異步函數**********************************/\n  return (\n    <div>\n      <BaseIndex title=\"Org refund history page\">\n        <BaseSearch\n          title=\"Search bar\"\n          submitFun={actionRef.current?.reload}\n          inputProps={{\n            value: searchKey,\n            onChange: ({ currentTarget: { value } }) => setSearchKey(value),\n          }}\n        />\n        <BaseTable<Page_org.mainTable>\n          searchKey={searchKey}\n          props={{\n            headerTitle: \"Refund record List\",\n            actionRef: actionRef,\n\n            columns: RefundTableColumns({\n              mainTableReload: reload,\n            }),\n            request: async () => {\n              const dataSource = await _getAllRefund().then((data) => {\n                console.log(\"withdrawal data: \", data);\n\n                return {\n                  success: true,\n                  data: data,\n                };\n              });\n              if (searchKey) {\n                dataSource.data = Helper<Page_org.mainTable>({\n                  dataSource: dataSource.data,\n                  keyWord: searchKey,\n                }) as Page_org.mainTable[];\n\n                return dataSource;\n              } else {\n                return dataSource;\n              }\n            },\n          }}\n        />\n      </BaseIndex>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;4BAMgB;;;eAAA;;;;;;;;;;;;;AAAT,SAAS,mBAAmB,EACjC,eAAe,EAGhB;IAOC,OAAO;QACL;YACE,OAAO;YACP,WAAW;YACX,KAAK;YACL,QAAQ,CAAC,GAAG;oBACkB;gBAA5B,OAAO,OAAO,WAAW,IAAG,sBAAA,OAAO,WAAW,cAAlB,0CAAA,oBAAoB,QAAQ,GAAG;YAC7D;YACA,OAAO;QACT;QACA;YACE,OAAO;YACP,WAAW;YACX,KAAK;YACL,OAAO;QACT;QACA;YACE,OAAO;YACP,WAAW;YACX,KAAK;YACL,OAAO;QACT;QAEA;YACE,OAAO;YACP,WAAW;YACX,KAAK;YACL,OAAO;QACT;QACA;YACE,OAAO;YACP,WAAW;YACX,KAAK;YACL,OAAO;YACP,WAAW;YACX,WAAW;gBACT,OAAO;gBACP,MAAM;YACR;QACF;QACA;YACE,OAAO;YACP,WAAW;YACX,KAAK;YACL,OAAO;YACP,WAAW;QACb;QAEA;YACE,OAAO;YACP,WAAW;YACX,KAAK;YACL,OAAO;YACP,QAAQ;QACV;KACD;AACH;KAnEgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4BCUhB;;;eAAwB;;;;;;;6DAhBF;8DACC;6DACD;0DAI6B;gCAChB;gEAChB;6BAO6B;;;;;;;;;;AACjC,SAAS;QAsBH;;IAnBnB,MAAM,YAAY,IAAA,aAAM;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,eAAQ,EAAC;IAC3C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,eAAQ,EAAC;YAAM;gBAAA,qBAAA,UAAU,OAAO,cAAjB,yCAAA,mBAAmB,MAAM;;IACpE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,eAAQ,EAAQ,EAAE;IACtD,IAAA,gBAAS,EAAC;QACR,UAAU;gBAAM;oBAAA,qBAAA,UAAU,OAAO,cAAjB,yCAAA,mBAAmB,MAAM;;IAC3C,GAAG,EAAE;IAQL,OACE,2BAAC;kBACC,2BAAC,kBAAS;YAAC,OAAM;;gBACf,2BAAC,mBAAU;oBACT,OAAM;oBACN,SAAS,GAAE,qBAAA,UAAU,OAAO,cAAjB,yCAAA,mBAAmB,MAAM;oBACpC,YAAY;wBACV,OAAO;wBACP,UAAU,CAAC,EAAE,eAAe,EAAE,KAAK,EAAE,EAAE,GAAK,aAAa;oBAC3D;;;;;;gBAEF,2BAAC,kBAAS;oBACR,WAAW;oBACX,OAAO;wBACL,aAAa;wBACb,WAAW;wBAEX,SAAS,IAAA,2BAAkB,EAAC;4BAC1B,iBAAiB;wBACnB;wBACA,SAAS;4BACP,MAAM,aAAa,MAAM,IAAA,mBAAa,IAAG,IAAI,CAAC,CAAC;gCAC7C,QAAQ,GAAG,CAAC,qBAAqB;gCAEjC,OAAO;oCACL,SAAS;oCACT,MAAM;gCACR;4BACF;4BACA,IAAI,WAAW;gCACb,WAAW,IAAI,GAAG,IAAA,qBAAM,EAAqB;oCAC3C,YAAY,WAAW,IAAI;oCAC3B,SAAS;gCACX;gCAEA,OAAO;4BACT,OACE,OAAO;wBAEX;oBACF;;;;;;;;;;;;;;;;;AAKV;GA9DwB;KAAA"}