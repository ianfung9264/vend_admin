{"version":3,"sources":["src_pages_Setting_fee_index_tsx-async.10448451008848288972.hot-update.js","src/pages/Setting/fee/index.tsx"],"sourcesContent":["globalThis.makoModuleHotUpdate(\n  'src/pages/Setting/fee/index.tsx',\n  {\n    modules: {},\n  },\n  function (runtime) {\n    runtime._h='8810289479525622558';;\n  },\n);\n","import { _getAllFee, _updateVendPopupsFee } from \"@/services/setting/fee\";\nimport { QuestionCircleOutlined, QuestionOutlined } from \"@ant-design/icons\";\nimport {\n  ProCard,\n  ProDescriptions,\n  ProForm,\n  ProFormText,\n} from \"@ant-design/pro-components\";\nimport { useRequest } from \"@umijs/max\";\nimport { Button, Divider, FormInstance, message, Tooltip } from \"antd\";\nimport useMessage from \"antd/es/message/useMessage\";\nimport React, { useRef, useState } from \"react\";\nexport default function Index() {\n  /**********************************狀態管理**********************************/\n  const [stripeFee, setStripeFee] = useState<{\n    percentage: number;\n    fixed_dollar: number;\n    billing_percentage: number;\n  }>();\n  const formRef = useRef<FormInstance>();\n  const [readOnly, setReadOnly] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const [messageApi, contextHolder] = message.useMessage();\n  useRequest(_getAllFee, {\n    onSuccess: (res) => {\n      setStripeFee(res.stripe);\n      formRef.current?.setFieldsValue(res.vendpopups);\n    },\n  });\n  /**********************************狀態管理**********************************/\n  /**********************************組件初始化**********************************/\n  /**********************************組件初始化**********************************/\n  /**********************************異步函數**********************************/\n  /**********************************異步函數**********************************/\n  return (\n    <ProCard title=\"Fee setting\" className=\"min-h-[90vh]\">\n      {contextHolder}\n      <ProCard\n        title={\n          <>\n            Stripe Fee\n            <Tooltip title=\"Stripe Fee can not be changed\">\n              <QuestionCircleOutlined className=\"ml-2 opacity-50\" />\n            </Tooltip>\n          </>\n        }\n        colSpan=\"50%\"\n      >\n        <ProDescriptions dataSource={stripeFee} column={1} layout=\"horizontal\">\n          <ProDescriptions.Item label=\"Fee Percentage\">\n            {stripeFee?.percentage}\n          </ProDescriptions.Item>\n          <ProDescriptions.Item label=\"Fee Fixed dollar\">\n            {stripeFee?.fixed_dollar}\n          </ProDescriptions.Item>\n          <ProDescriptions.Item label=\"Billing Percentage\">\n            {stripeFee?.billing_percentage}\n          </ProDescriptions.Item>\n        </ProDescriptions>\n      </ProCard>\n\n      <Divider type=\"vertical\" className=\"min-h-[90vh]\" />\n      <ProCard\n        title=\"Vend Popups Fee\"\n        extra={\n          <div className=\"flex gap-2\">\n            {!readOnly && (\n              <Button\n                type=\"primary\"\n                htmlType=\"submit\"\n                loading={loading}\n                onClick={() => {\n                  setLoading(true);\n                  messageApi.loading(\"Updating...\");\n                  formRef.current?.submit();\n                }}\n              >\n                Save\n              </Button>\n            )}\n            <Button\n              type=\"primary\"\n              disabled={loading}\n              onClick={() => setReadOnly(!readOnly)}\n            >\n              {readOnly ? \"Edit\" : \"Cancel\"}\n            </Button>\n          </div>\n        }\n      >\n        <ProForm\n          formRef={formRef}\n          disabled={readOnly}\n          readonly={readOnly}\n          submitter={false}\n          layout=\"horizontal\"\n          grid={true}\n          onFinish={async (values) => {\n            await _updateVendPopupsFee({\n              percentage: values.percentage,\n            }).then(() => {\n              messageApi.destroy();\n              messageApi.success(\"Success\");\n              setLoading(false);\n              setReadOnly(true);\n            });\n          }}\n        >\n          <ProFormText\n            colProps={{ span: 8 }}\n            name=\"percentage\"\n            label=\"Fee Percentage\"\n          />\n        </ProForm>\n      </ProCard>\n    </ProCard>\n  );\n}\n"],"names":[],"mappings":"AAAA,WAAW,mBAAmB,CAC5B,mCACA;IACE,SAAS;;;;;;wCCSb;;;2BAAwB;;;;;;wCAZyB;0CACQ;kDAMlD;wCACoB;yCACqC;oFAExB;;;;;;;;;;YACzB,SAAS;;gBACtB,wEAAwE,GACxE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,eAAQ;gBAK1C,MAAM,UAAU,IAAA,aAAM;gBACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,eAAQ,EAAC;gBACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,eAAQ,EAAC;gBACvC,MAAM,CAAC,YAAY,cAAc,GAAG,aAAO,CAAC,UAAU;gBACtD,IAAA,eAAU,EAAC,eAAU,EAAE;oBACrB,WAAW,CAAC;4BAEV;wBADA,aAAa,IAAI,MAAM;yBACvB,mBAAA,QAAQ,OAAO,cAAf,+BAAA,iBAAiB,cAAc,CAAC,IAAI,UAAU;oBAChD;gBACF;gBACA,wEAAwE,GACxE,yEAAyE,GACzE,yEAAyE,GACzE,wEAAwE,GACxE,wEAAwE,GACxE,qBACE,2BAAC,sBAAO;oBAAC,OAAM;oBAAc,WAAU;;wBACpC;sCACD,2BAAC,sBAAO;4BACN,qBACE;;oCAAE;kDAEA,2BAAC,aAAO;wCAAC,OAAM;kDACb,cAAA,2BAAC,6BAAsB;4CAAC,WAAU;;;;;4BAIxC,SAAQ;sCAER,cAAA,2BAAC,8BAAe;gCAAC,YAAY;gCAAW,QAAQ;gCAAG,QAAO;;kDACxD,2BAAC,8BAAe,CAAC,IAAI;wCAAC,OAAM;kDACzB,sBAAA,gCAAA,UAAW,UAAU;;;;;;kDAExB,2BAAC,8BAAe,CAAC,IAAI;wCAAC,OAAM;kDACzB,sBAAA,gCAAA,UAAW,YAAY;;;;;;kDAE1B,2BAAC,8BAAe,CAAC,IAAI;wCAAC,OAAM;kDACzB,sBAAA,gCAAA,UAAW,kBAAkB;;;;;;;;;;;;;;;;;sCAKpC,2BAAC,aAAO;4BAAC,MAAK;4BAAW,WAAU;;;;;;sCACnC,2BAAC,sBAAO;4BACN,OAAM;4BACN,qBACE,2BAAC;gCAAI,WAAU;;oCACZ,CAAC,0BACA,2BAAC,YAAM;wCACL,MAAK;wCACL,UAAS;wCACT,SAAS;wCACT,SAAS;gDAGP;4CAFA,WAAW;4CACX,WAAW,OAAO,CAAC;6CACnB,mBAAA,QAAQ,OAAO,cAAf,+BAAA,iBAAiB,MAAM;wCACzB;kDACD;;kDAIH,2BAAC,YAAM;wCACL,MAAK;wCACL,UAAU;wCACV,SAAS,IAAM,YAAY,CAAC;kDAE3B,WAAW,SAAS;;;;sCAK3B,cAAA,2BAAC,sBAAO;gCACN,SAAS;gCACT,UAAU;gCACV,UAAU;gCACV,WAAW;gCACX,QAAO;gCACP,MAAM;gCACN,UAAU,OAAO;oCACf,MAAM,IAAA,yBAAoB,EAAC;wCACzB,YAAY,OAAO,UAAU;oCAC/B,GAAG,IAAI,CAAC;wCACN,WAAW,OAAO;wCAClB,WAAW,OAAO,CAAC;wCACnB,WAAW;wCACX,YAAY;oCACd;gCACF;0CAEA,cAAA,2BAAC,0BAAW;oCACV,UAAU;wCAAE,MAAM;oCAAE;oCACpB,MAAK;oCACL,OAAM;;;;;;;;;;;;;;;;;;;;;;YAMlB;eAzGwB;;oBAUc,aAAO,CAAC;oBAC5C,eAAU;;;iBAXY;;;;;;;;;;;;;;;;;;;;;;;;;IDTV;AACZ,GACA,SAAU,OAAO;IACf,QAAQ,EAAE,GAAC;;AACb"}